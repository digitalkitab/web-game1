<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Game Auth</title>

<style>
*{
  margin:0;
  padding:0;
  box-sizing:border-box;
  font-family:Arial, sans-serif;
}

body{
  height:100vh;
  background:radial-gradient(circle, #0f172a, #020617);
  display:flex;
  justify-content:center;
  align-items:center;
  color:white;
}

.frame{
  width:650px;
  border:2px solid cyan;
  padding:20px;
  box-shadow:0 0 30px cyan;
  position:relative;
}

.frame::before{
  content:"";
  position:absolute;
  inset:10px;
  border:1px solid cyan;
  opacity:.4;
  pointer-events:none;
}

.box{
  width:280px;
  margin:auto;
  text-align:center;
  position:relative;
  z-index:2;
}

h2{ margin-bottom:15px; }

input{
  width:100%;
  padding:10px;
  margin-bottom:10px;
  border:none;
  border-radius:3px;
}

button{
  width:100%;
  padding:10px;
  margin-top:5px;
  border:none;
  cursor:pointer;
  font-weight:bold;
}

.primary{ background:#22c55e; }
.secondary{ background:#0ea5e9; color:white; }
.danger{ background:#ef4444; color:white; }

.link{
  font-size:12px;
  opacity:.8;
  cursor:pointer;
  margin-top:8px;
}

.msg{
  margin-top:8px;
  font-size:13px;
}

/* hide sections */
.hidden{ display:none; }

@media(max-width:700px){
  .frame{ width:90%; }
}
</style>
</head>

<body>

<div class="frame">
  <!-- LOGIN -->
  <div class="box" id="loginBox">
    <h2>LOGIN</h2>
    <input id="loginUser" placeholder="Username">
    <input id="loginPass" type="password" placeholder="Password">
    <button class="primary" onclick="login()">Login</button>
    <div class="link" onclick="showSignup()">Create Account</div>
    <div class="link" onclick="showForgot()">Forgot Password?</div>
    <div class="msg" id="loginMsg"></div>
  </div>

  <!-- SIGNUP -->
  <div class="box hidden" id="signupBox">
    <h2>SIGN UP</h2>
    <input id="suUser" placeholder="Username (min 4)">
    <input id="suPass" type="password" placeholder="Password (min 6)">
    <input id="suPass2" type="password" placeholder="Confirm Password">
    <button class="secondary" onclick="signup()">Register</button>
    <div class="link" onclick="showLogin()">Back to Login</div>
    <div class="msg" id="signupMsg"></div>
  </div>

  <!-- FORGOT -->
  <div class="box hidden" id="forgotBox">
    <h2>FORGOT PASSWORD</h2>
    <input id="fpUser" placeholder="Enter Username">
    <button class="danger" onclick="forgot()">Reset Request</button>
    <div class="link" onclick="showLogin()">Back to Login</div>
    <div class="msg" id="forgotMsg"></div>
  </div>
</div>

<script>
const API = "https://web-game-backend-18mn.onrender.com";

/* VIEW SWITCH */
function showLogin(){
  loginBox.classList.remove("hidden");
  signupBox.classList.add("hidden");
  forgotBox.classList.add("hidden");
}
function showSignup(){
  loginBox.classList.add("hidden");
  signupBox.classList.remove("hidden");
}
function showForgot(){
  loginBox.classList.add("hidden");
  forgotBox.classList.remove("hidden");
}

/* LOGIN */
async function login(){
  const u = loginUser.value;
  const p = loginPass.value;
  if(!u || !p){
    loginMsg.innerText="Fill all fields";
    return;
  }

  loginMsg.innerText="Logging in...";

  const res = await fetch(API+"/login",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({username:u,password:p})
  });
  const data = await res.json();

  if(data.success){
    loginMsg.innerText="Login Successful";
    setTimeout(()=>location.href="./home.html",800);
  }else{
    loginMsg.innerText="Invalid credentials";
  }
}

/* SIGNUP (FAKE ACCOUNT BLOCK) */
function signup(){
  const u = suUser.value;
  const p1 = suPass.value;
  const p2 = suPass2.value;

  if(u.length<4 || p1.length<6){
    signupMsg.innerText="Weak username/password";
    return;
  }
  if(p1!==p2){
    signupMsg.innerText="Passwords do not match";
    return;
  }

  // ðŸ”’ BLOCK FAKE ACCOUNTS
  signupMsg.innerText="Signup disabled. Contact admin.";
}

/* FORGOT */
async function forgot(){
  const u = fpUser.value;
  if(!u){
    forgotMsg.innerText="Enter username";
    return;
  }

  const res = await fetch(API+"/forgot-password",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({ username:u })
  });

  const data = await res.json();

  if(data.success){
    forgotMsg.innerText="Request sent to admin";
  }else{
    forgotMsg.innerText="Error";
  }
}

  // backend later
  forgotMsg.innerText="If account exists, admin will reset.";
}
</script>

</body>
</html>

