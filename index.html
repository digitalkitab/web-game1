<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Login - WEB GAME</title>
<!-- ⚠️ UI / CSS SAME – NOT TOUCHED -->
<style>
/* ======= SAME CSS AS YOU SENT (UNCHANGED) ======= */
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'Segoe UI',Tahoma,Geneva,Verdana,sans-serif;background:#0a0e27;min-height:100vh;display:flex;align-items:center;justify-content:center;overflow:hidden;position:relative}
body::before{content:'';position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:radial-gradient(circle,rgba(0,255,255,.1) 1px,transparent 1px);background-size:50px 50px;animation:gridMove 20s linear infinite}
@keyframes gridMove{0%{transform:translate(0,0)}100%{transform:translate(50px,50px)}}
.signup-container{position:relative;z-index:10;width:90%;max-width:400px;padding:40px}
.cyber-frame{background:rgba(10,14,39,.95);border:2px solid rgba(0,255,255,.5);border-radius:20px;padding:50px 40px;box-shadow:0 0 30px rgba(0,255,255,.3)}
.logo-title{text-align:center;font-size:32px;font-weight:bold;color:#00ffff;margin-bottom:10px}
.page-title{text-align:center;color:#00ffff;margin-bottom:30px}
.input-field{width:100%;padding:15px;margin-bottom:20px;background:rgba(0,255,255,.05);border:2px solid rgba(0,255,255,.3);border-radius:10px;color:white}
.input-field.error{border-color:#ff0055}
.error-message{color:#ff0055;font-size:12px;display:none}
.error-message.show{display:block}
.signup-btn{width:100%;padding:15px;background:cyan;border:none;border-radius:10px;font-size:18px;font-weight:bold;cursor:pointer}
.back-link{display:block;text-align:center;margin-top:15px;color:#00ffff;text-decoration:none}
</style>
</head>

<body>

<div class="signup-container">
  <div class="cyber-frame">
    <h1 class="logo-title">WEB GAME</h1>
    <h2 class="page-title">Login</h2>

    <form id="loginForm">
      <input id="username" class="input-field" placeholder="Username" required>
      <div id="userError" class="error-message"></div>

      <input id="password" type="password" class="input-field" placeholder="Password" required>

      <button class="signup-btn" id="loginBtn">
        <span id="btnText">Login</span>
      </button>
    </form>

    <a href="#" class="back-link" id="forgotLink">Forgot Password?</a>
    <a href="signup.html" class="back-link">Don't have an account? Sign Up</a>
  </div>
</div>

<script>
/* ====== FIXED LOGIC ONLY ====== */
const API_BASE_URL = "https://web-game-backend-18mn.onrender.com";

const form = document.getElementById("loginForm");
const usernameInput = document.getElementById("username");
const passwordInput = document.getElementById("password");
const userError = document.getElementById("userError");
const btnText = document.getElementById("btnText");
const loginBtn = document.getElementById("loginBtn");

form.addEventListener("submit", async (e) => {
  e.preventDefault();
  userError.classList.remove("show");
  usernameInput.classList.remove("error");

  loginBtn.disabled = true;
  btnText.innerText = "Logging in...";

  try {
    const res = await fetch(API_BASE_URL + "/login", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({
        username: usernameInput.value.trim(),
        password: passwordInput.value
      })
    });

    const data = await res.json();

    if (res.ok && data.success) {
      window.location.href = "home.html";
    } else {
      userError.innerText = data.message || "Invalid login";
      userError.classList.add("show");
      usernameInput.classList.add("error");
    }

  } catch (err) {
    userError.innerText = "Network error. Please try again";
    userError.classList.add("show");
    usernameInput.classList.add("error");
  }

  loginBtn.disabled = false;
  btnText.innerText = "Login";
});
</script>

</body>
</html>
