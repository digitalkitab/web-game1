<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Game Login</title>

<style>
body{
  background:#020617;
  color:white;
  font-family:Arial;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}
.box{
  width:300px;
  padding:20px;
  border:2px solid cyan;
  box-shadow:0 0 20px cyan;
  text-align:center;
}
input,button{
  width:100%;
  padding:10px;
  margin-top:8px;
}
button{
  cursor:pointer;
  background:cyan;
  border:none;
  font-weight:bold;
}
.link{
  font-size:12px;
  cursor:pointer;
  margin-top:8px;
  color:#67e8f9;
}
.hidden{
  display:none;
}
</style>
</head>

<body>

<div class="box" id="loginBox">
  <h2>LOGIN</h2>
  <input id="lu" placeholder="Username">
  <input id="lp" type="password" placeholder="Password">
  <button onclick="login()">Login</button>
  <div class="link" onclick="showSignup()">Create Account</div>
  <div class="link" onclick="showForgot()">Forgot Password</div>
  <div id="lm"></div>
</div>

<div class="box hidden" id="signupBox">
  <h2>CREATE ACCOUNT</h2>
  <input id="su" placeholder="Username">
  <input id="sp" type="password" placeholder="Password">
  <button onclick="signup()">Sign Up</button>
  <div class="link" onclick="showLogin()">Back</div>
  <div id="sm"></div>
</div>

<div class="box hidden" id="forgotBox">
  <h2>FORGOT PASSWORD</h2>
  <input id="fu" placeholder="Username">
  <button onclick="forgot()">Send Request</button>
  <div class="link" onclick="showLogin()">Back</div>
  <div id="fm"></div>
</div>

<script>
const API = "https://web-game-backend-18mn.onrender.com";

function showLogin(){
  document.getElementById("loginBox").classList.remove("hidden");
  document.getElementById("signupBox").classList.add("hidden");
  document.getElementById("forgotBox").classList.add("hidden");
}

function showSignup(){
  document.getElementById("loginBox").classList.add("hidden");
  document.getElementById("signupBox").classList.remove("hidden");
  document.getElementById("forgotBox").classList.add("hidden");
}

function showForgot(){
  document.getElementById("loginBox").classList.add("hidden");
  document.getElementById("signupBox").classList.add("hidden");
  document.getElementById("forgotBox").classList.remove("hidden");
}

async function login(){
  const r = await fetch(API + "/login",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({
      username: document.getElementById("lu").value,
      password: document.getElementById("lp").value
    })
  });
  const d = await r.json();
  document.getElementById("lm").innerText =
    d.success ? "Login Successful" : "Invalid Login";
}

async function signup(){
  const r = await fetch(API + "/signup",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({
      username: document.getElementById("su").value,
      password: document.getElementById("sp").value
    })
  });
  const d = await r.json();
  document.getElementById("sm").innerText =
    d.success ? "Account Created" : "Signup Failed";
}

async function forgot(){
  await fetch(API + "/forgot-password",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({
      username: document.getElementById("fu").value
    })
  });
  document.getElementById("fm").innerText =
    "Request sent to admin";
}
</script>

</body>
</html>
