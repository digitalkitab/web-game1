<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Aviator Demo</title>

<style>
*{box-sizing:border-box;font-family:Arial,sans-serif}

body{
  margin:0;
  background:#000;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
  color:#fff;
}

/* GAME */
.game{
  width:360px;
  height:700px;
  background:#0b0e16;
  border-radius:20px;
  padding:12px;
  position:relative;
  overflow:hidden;
}

/* SHAKE */
.game.shake{
  animation:shake .4s;
}
@keyframes shake{
  0%{transform:translateX(0)}
  25%{transform:translateX(-6px)}
  50%{transform:translateX(6px)}
  75%{transform:translateX(-6px)}
  100%{transform:translateX(0)}
}

/* RED FLASH OVERLAY */
.flash{
  position:absolute;
  inset:0;
  background:rgba(255,0,0,.6);
  opacity:0;
  pointer-events:none;
  z-index:20;
}
.flash.show{
  animation:flash .5s;
}
@keyframes flash{
  0%{opacity:0}
  50%{opacity:1}
  100%{opacity:0}
}

/* HISTORY */
.history{
  display:flex;
  gap:12px;
  font-size:13px;
}
.history span{color:#b05cff}

/* TOP */
.top{
  display:flex;
  justify-content:space-between;
  font-size:13px;
  margin-top:6px;
}

/* MULTIPLIER */
.multiplier{
  text-align:center;
  font-size:56px;
  font-weight:800;
  margin:10px 0;
  z-index:5;
}

/* GRAPH */
.graph{
  position:relative;
  height:240px;
  background:
    linear-gradient(#1e2745 1px, transparent 1px),
    linear-gradient(90deg,#1e2745 1px, transparent 1px);
  background-size:20px 20px;
  border-left:2px solid #333;
  border-bottom:2px solid #333;
  overflow:hidden;
}

/* RED AREA */
.area{
  position:absolute;
  inset:0;
  background:linear-gradient(to top,rgba(255,0,0,.35),transparent);
  clip-path:polygon(0 100%,0 100%,100% 100%);
}

/* SVG */
svg{position:absolute;inset:0}
path{stroke:#ff2d2d;stroke-width:3;fill:none}

/* PLANE */
.plane{
  position:absolute;
  font-size:26px;
  left:0;
  bottom:0;
}

/* RED LINE */
.vline{
  position:absolute;
  width:3px;
  background:#ff2d2d;
  left:0;
  bottom:0;
  height:0;
}

/* CRASH TEXT */
.crash-text{
  position:absolute;
  inset:0;
  display:flex;
  justify-content:center;
  align-items:center;
  font-size:48px;
  font-weight:900;
  color:#ff2d2d;
  opacity:0;
  z-index:15;
}
.crash-text.show{opacity:1}

/* CALC */
.calc{
  margin-top:10px;
  background:#0e162c;
  padding:10px;
  border-radius:12px;
  font-size:14px;
}
.calc-row{
  display:flex;
  justify-content:space-between;
  margin-bottom:6px;
}

/* CONTROLS */
.controls{
  position:absolute;
  bottom:14px;
  width:100%;
}

.quick{
  display:flex;
  gap:10px;
  margin-bottom:10px;
}
.quick button{
  flex:1;
  padding:10px;
  background:#1e2745;
  border:none;
  border-radius:10px;
  color:#fff;
}
.quick button.active{background:#b05cff}

.main-btn{
  width:100%;
  padding:14px;
  border:none;
  border-radius:12px;
  font-size:18px;
  font-weight:bold;
}
.bet{background:#2ecc00;color:#000}
.cashout{background:#d97b00;color:#fff}

.status{
  text-align:center;
  font-size:13px;
  margin-top:6px;
}
</style>
</head>

<body>

<div class="game" id="game">

  <div class="flash" id="flash"></div>

  <div class="history">
    <span>45.55x</span><span>1.26x</span><span>9.75x</span>
    <span>5.71x</span><span>2.38x</span>
  </div>

  <div class="top">
    <div>Wallet ₹<span id="wallet">1000</span></div>
    <div>P/L ₹<span id="pl">0</span></div>
  </div>

  <div class="multiplier" id="multiplier">1.00x</div>

  <div class="graph">
    <div class="area" id="area"></div>
    <svg><path id="curve"></path></svg>
    <div class="vline" id="vline"></div>
    <div class="plane" id="plane">✈️</div>
    <div class="crash-text" id="crashText">CRASH</div>
  </div>

  <div class="calc">
    <div class="calc-row"><span>Bet</span><strong>₹<span id="calcBet">0</span></strong></div>
    <div class="calc-row"><span>Multiplier</span><strong id="calcMul">1.00x</strong></div>
    <div class="calc-row"><span>Return</span><strong>₹<span id="calcReturn">0</span></strong></div>
  </div>

  <div class="controls">
    <div class="quick">
      <button onclick="setAmount(10)">10</button>
      <button onclick="setAmount(20)">20</button>
      <button onclick="setAmount(50)">50</button>
      <button onclick="setAmount(100)">100</button>
    </div>
    <button id="btn" class="main-btn bet">BET</button>
    <div class="status" id="status">Select amount</div>
  </div>

</div>

<audio id="crashSound">
  <source src="https://assets.mixkit.co/sfx/preview/mixkit-explosion-hit-1704.mp3">
</audio>

<script>
let running=false, crashed=false;
let wallet=1000, pl=0, bet=0;
let t=0, value=1, crashPoint=0, interval;

const game=document.getElementById("game");
const flash=document.getElementById("flash");
const crashText=document.getElementById("crashText");
const multiplier=document.getElementById("multiplier");
const btn=document.getElementById("btn");
const status=document.getElementById("status");
const walletEl=document.getElementById("wallet");
const plEl=document.getElementById("pl");
const plane=document.getElementById("plane");
const curve=document.getElementById("curve");
const vline=document.getElementById("vline");
const area=document.getElementById("area");
const calcBet=document.getElementById("calcBet");
const calcMul=document.getElementById("calcMul");
const calcReturn=document.getElementById("calcReturn");
const crashSound=document.getElementById("crashSound");
const buttons=document.querySelectorAll(".quick button");

const W=320, H=220;

function setAmount(val){
  bet=val;
  calcBet.innerText=bet;
  buttons.forEach(b=>b.classList.remove("active"));
  event.target.classList.add("active");
  status.innerText="Ready ₹"+bet;
}

btn.onclick=()=>{
  if(!running) startGame();
  else if(!crashed) cashOut();
};

function startGame(){
  if(bet<=0 || bet>wallet){alert("Select amount");return}

  wallet-=bet;
  walletEl.innerText=wallet;

  running=true;
  crashed=false;
  t=0; value=1;
  crashPoint=(Math.random()*3+1.5);

  crashText.classList.remove("show");
  btn.className="main-btn cashout";
  btn.innerText="CASH OUT";
  status.innerText="Flying...";

  interval=setInterval(()=>{
    t+=0.03;
    value=Math.exp(t/3);

    multiplier.innerText=value.toFixed(2)+"x";
    calcMul.innerText=value.toFixed(2)+"x";
    calcReturn.innerText=Math.floor(bet*value);

    let x=Math.min(t*40,W);
    let y=Math.min(value*18,H);

    plane.style.left=x+"px";
    plane.style.bottom=y+"px";
    vline.style.left=x+"px";
    vline.style.height=y+"px";

    curve.setAttribute("d",`M0 ${H} Q ${x/2} ${H-y/2} ${x} ${H-y}`);
    area.style.clipPath=`polygon(0 100%,0 ${100-(y/3)}%,${x/3}% ${100-(y/3)}%,100% 100%)`;

    if(value>=crashPoint) crash();
  },60);
}

function cashOut(){
  clearInterval(interval);
  let win=Math.floor(bet*value);
  wallet+=win;
  pl+=win-bet;
  walletEl.innerText=wallet;
  plEl.innerText=pl;
  reset("Cashed out");
}

function crash(){
  clearInterval(interval);
  crashed=true;
  pl-=bet;
  plEl.innerText=pl;

  crashText.classList.add("show");
  flash.classList.add("show");
  game.classList.add("shake");
  crashSound.play();

  setTimeout(reset,1500);
}

function reset(msg){
  running=false;
  crashed=false;
  btn.className="main-btn bet";
  btn.innerText="BET";
  multiplier.innerText="1.00x";
  calcMul.innerText="1.00x";
  calcReturn.innerText="0";
  crashText.classList.remove("show");
  flash.classList.remove("show");
  game.classList.remove("shake");
  status.innerText=msg||"Select amount";
}
</script>

</body>
</html>
