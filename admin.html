<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>
<style>
body{ background:black; color:white; font-family:Arial; padding:20px; }
.card{ border:1px solid cyan; padding:10px; margin:10px 0; }
input,button{ margin-top:5px; }
</style>
</head>
<body>

<h2>Forgot Password Requests</h2>
<div id="list">Loading...</div>

<script>
const API="https://web-game-backend-18mn.onrender.com";

async function load(){
  const r=await fetch(API+"/admin/forgot-requests");
  const d=await r.json();
  list.innerHTML="";
  d.forEach(req=>{
    const div=document.createElement("div");
    div.className="card";
    div.innerHTML=`
      User: ${req.username}<br>
      Time: ${req.time}<br>
      <input placeholder="New Password" id="p_${req.username}">
      <button onclick="reset('${req.username}')">Reset</button>
    `;
    list.appendChild(div);
  });
}

async function reset(u){
  const np=document.getElementById("p_"+u).value;
  await fetch(API+"/admin/reset-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:u,newPassword:np})});
  alert("Password reset for "+u);
}

load();
</script>

</body>
</html>
