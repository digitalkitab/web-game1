<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin - Forgot Requests</title>
<style>
body{
  background:black;
  color:white;
  font-family:Arial;
  padding:20px;
}
button{ cursor:pointer; }
.card{
  border:1px solid cyan;
  padding:10px;
  margin:10px 0;
}
</style>
</head>
<body>

<h2>Forgot Password Requests</h2>
<div id="list">Loading...</div>

<script>
const API="https://web-game-backend-18mn.onrender.com";

async function load(){
  const res = await fetch(API+"/admin/forgot-requests");
  const data = await res.json();

  const list = document.getElementById("list");
  list.innerHTML="";

  data.forEach((r,i)=>{
    const d=document.createElement("div");
    d.className="card";
    d.innerHTML=`
      <b>User:</b> ${r.username}<br>
      <b>Time:</b> ${r.time}<br>
      <b>Status:</b> ${r.status}<br>
      <button onclick="done(${i})">Mark Done</button>
    `;
    list.appendChild(d);
  });
}

async function done(i){
  await fetch(API+"/admin/forgot-done",{
    method:"POST",
    headers:{ "Content-Type":"application/json" },
    body:JSON.stringify({ index:i })
  });
  load();
}

load();
</script>

</body>
</html>
